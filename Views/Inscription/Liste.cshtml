@model ExamenCsharp.Models.ViewModels.ListeInscriptionsViewModel

@{
    ViewData["Title"] = "Liste des inscriptions";
}

<h2>@ViewData["Title"]</h2>

<div class="row mb-4">
    <div class="col-md-6">
        <form method="get" asp-action="Liste">
            <div class="input-group">
                <select name="codeClasse" class="form-select" asp-items="ViewBag.Classes">
                    <option value="">-- Sélectionner une classe --</option>
                </select>
                <button type="submit" class="btn btn-primary">Filtrer</button>
            </div>
        </form>
    </div>
</div>

@if (!string.IsNullOrEmpty(Model.CodeClasse))
{
    <h4>Classe: @Model.LibelleClasse</h4>

    @if (Model.Inscriptions.Any())
    {
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Matricule</th>
                    <th>Nom</th>
                    <th>Prenom</th>
                    <th>Date d'inscription</th>
                    <th>Montant</th>
                    <th>Annee Scolaire</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var inscription in Model.Inscriptions)
                {
                    <tr>
                        <td>@inscription.Id</td>
                        <td>@inscription.Etudiant.Matricule</td>
                        <td>@inscription.Etudiant.Nom</td>
                        <td>@inscription.Etudiant.Prenom</td>
                        <td>@inscription.Date.ToString("dd/MM/yyyy HH:mm")</td>
                        <td>@inscription.Montant FCFA</td>
                        <td>@inscription.AnneeScolaire.Libelle</td>
                    </tr>
                }
            </tbody>
        </table>
        <p><strong>Total: @Model.Inscriptions.Count() inscription(s)</strong></p>
    }
    else
    {
        <div class="alert alert-info">
            Aucune inscription trouvée pour cette classe.
        </div>
    }
}

<div class="mt-3">
    <a asp-action="Enregistrer" class="btn btn-success">Nouvelle inscription</a>
</div>
